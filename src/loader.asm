; ============================================================================
; Compressed loader.
; ============================================================================

.org 0x8000

Start:
    adrl sp, stack_base
	B main

Jump_unlz4:
    b unlz4

; ============================================================================
; Stack
; ============================================================================

.skip 1024
stack_base:

main:
    adr r0, code_source
    adr r1, code_main
    bl unlz4
    b code_main

; ============================================================================
; Additional code modules
; ============================================================================

.include "../lib/lz4-decode.asm"

.p2align 2
code_source:
.incbin "../build/arc-django.lz4"

.p2align 2
code_main:
